<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Docker Swarm - Eclipse Hono</title>
    <meta name="generator" content="Hugo 0.42" />

    
    <meta name="description" content="A set of micro-services for connecting millions of devices.">
    
    <link rel="canonical" href="https://www.eclipse.org/hono/deployment/docker-swarm/">
    
    <meta name="author" content="The Eclipse Hono Project">
    

    <meta property="og:url" content="https://www.eclipse.org/hono/deployment/docker-swarm/">
    <meta property="og:title" content="Eclipse Hono">
    <meta property="og:image" content="https://www.eclipse.org/hono/images/logo-32x32px.png">
    <meta name="apple-mobile-web-app-title" content="Eclipse Hono">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://www.eclipse.org/hono/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://www.eclipse.org/hono/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://www.eclipse.org/hono/fonts/icon.eot');
        src: url('https://www.eclipse.org/hono/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://www.eclipse.org/hono/fonts/icon.woff')
               format('woff'),
             url('https://www.eclipse.org/hono/fonts/icon.ttf')
               format('truetype'),
             url('https://www.eclipse.org/hono/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://www.eclipse.org/hono/stylesheets/application.css">
    <link rel="stylesheet" href="https://www.eclipse.org/hono/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://www.eclipse.org/hono/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://www.eclipse.org/hono/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="https://www.eclipse.org/hono/css/hono.css">
    
    <link rel="stylesheet" href="//www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/vendor/cookieconsent/cookieconsent.min.css">
    
    <script src="https://www.eclipse.org/hono/javascripts/modernizr.js"></script>
    <script src="//www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js"></script>

    

  </head>
  <body class="palette-primary-orange palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Docker Swarm
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/eclipse/hono" title="@eclipse/hono on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://www.eclipse.org/hono/" class="project">
    <div class="banner">
      
        <div class="drawerlogo">
          <img src="https://www.eclipse.org/hono/images/logo-32x32px.png">
        </div>
      
      <div class="name">
        <strong>Eclipse Hono&trade; </strong>
        
          <br>
          eclipse/hono
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://www.eclipse.org/hono/download/" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/eclipse/hono/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Getting started" href="/hono/getting-started/">
	
	Getting started
</a>



  
</li>



<li>
  
    



<a  title="Downloads" href="/hono/download/">
	
	Downloads
</a>



  
</li>



<li>
  
    



<a  title="Sandbox" href="/hono/sandbox/">
	
	Sandbox
</a>



  
</li>



<li>
  
    



<a  title="Concepts" href="/hono/concepts/">
	
	Concepts
</a>



  
</li>



<li>
  
    



<a  title="User Guide" href="/hono/user-guide/">
	
	User Guide
</a>



  
</li>



<li>
  
    



<a  title="Admin Guide" href="/hono/admin-guide/">
	
	Admin Guide
</a>



  
</li>



<li>
  
    



<a  title="Developer Guide" href="/hono/dev-guide/">
	
	Developer Guide
</a>



  
</li>



<li>
  
    



<a  title="API" href="/hono/api/">
	
	API
</a>



  
</li>



<li>
  
    



<a  title="Deployment" href="/hono/deployment/">
	
	Deployment
</a>



  
</li>



<li>
  
    



<a  title="Architecture" href="/hono/architecture/">
	
	Architecture
</a>



  
</li>



<li>
  
    



<a  title="Community" href="/hono/community/">
	
	Community
</a>



  
</li>



<li>
  
    



<a  title="License" href="/hono/license/">
	
	License
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">Build Status:</span>

        <ul>
          
          <li>
            <a href="https://ci.eclipse.org/hono/job/Hono-CI/" title="Eclipse Build Status" target="_blank">
              <img src="https://ci.eclipse.org/hono/buildStatus/icon?job=Hono-CI">
            </a>
          </li>
          

          <li>
            <a href="https://travis-ci.org/eclipse/hono" title="Travis Build Status" target="_blank">
              <img src="https://travis-ci.org/eclipse/hono.svg?branch=master" />
            </a>
          </li>
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Docker Swarm </h1>

			<p>Eclipse Hono&trade; components are distributed by means of Docker images which can be deployed to arbitrary environments where Docker is available. This section provides step-by-step instructions for deploying Hono to a cluster of Docker Engine nodes running in <em>Swarm mode</em>.
</p>

<p>The focus of this guide is on describing how custom configuration files can be used with Hono when deploying to a Docker Swarm.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>The only requirement for this guide is a working cluster of Docker Engine nodes running in Swarm mode. While this guide also works with a single Docker Engine node in Swarm mode (see <a href="/hono/getting-started/">Getting started</a>), the main deployment target will probably be a multi-node cluster running on some cloud infrastructure, e.g. a <a href="https://docs.docker.com/docker-for-aws/">Docker for AWS</a> installation running on Amazon Web Services infrastructure. Please refer to the Docker for AWS documentation for instructions on how to set up a Swarm on AWS.</p>

<h2 id="deployment">Deployment</h2>

<p>It is very easy to deploy the containers comprising a Hono instance to an existing Docker Swarm based on a script. The remainder of this guide will use the example deploy script created in the <code>example/target/deploy/docker</code> folder during the build process for that purpose. Once the build has finished, the process of deploying Hono to a cloud based, multi-node cluster is similar to the way described in the <a href="/hono/getting-started/">Getting started guide</a>:</p>

<pre><code class="language-sh">~/hono/example$ export DOCKER_HOST=tcp://my-swarm.my-domain.com:2375
~/hono/example$ target/deploy/docker/swarm_deploy.sh
</code></pre>

<p>Make sure to replace <code>my-swarm.my-domain.com:2375</code> with the host name or IP address and port of one of the Docker Swarm managers of the cluster to deploy to. When deploying to a swarm running on cloud infrastructure, direct access to the swarm manager(s) might not be possible, e.g. because the swarm runs on a private network behind a firewall. In such cases an <code>ssh</code> tunnel can usually be established with one of the swarm managers, providing a local TCP socket which can be used to transparently communicate with the Docker daemon running on the (remote) swarm manager. The Docker documentation contains details on how to set up and use such an <code>ssh</code> tunnel to <a href="https://docs.docker.com/docker-for-aws/deploy/">deploy an application to Docker for AWS</a>.</p>

<h2 id="custom-configuration">Custom Configuration</h2>

<p>The Hono <em>Auth Server</em> Docker image (<code>eclipse/hono-service-auth</code>) contains a default <code>permissions.json</code> file from the <code>services/auth</code> module which defines the identities and authorizations of clients connecting to any of the Hono service endpoints. During the build process this file is packaged into a JAR file and copied to the Docker image. The <em>Auth Server</em> component loads the file from its default resource location (<code>classpath:/permissions.json</code> when starting up.</p>

<p>In the remainder of this guide we will employ <a href="https://docs.docker.com/engine/swarm/secrets/">Docker Swarm&rsquo;s <em>Secret</em></a> mechanism for configuring an <em>Auth Server</em> Docker container to load a custom permissions file from a file system resource instead of the default one.</p>

<div class="admonition warning">
<p class="admonition-title"></p>
<p>You will need at least Docker version 17.03.1 (corresponding to 1.13.1 in Docker&rsquo;s old versioning scheme) in order to run the example in this guide.</p>
</div>

<h3 id="docker-secrets">Docker Secrets</h3>

<p>The <code>example/target/deploy/docker/swarm_deploy.sh</code> script defines infrastructure and services that comprise a full Hono <em>stack</em>.</p>

<p>Among others, the file contains the following service definition for the Auth Server:</p>

<pre><code class="language-sh">...

echo Deploying Authentication Server ...
docker secret create -l $NS auth-server-key.pem $CERTS/auth-server-key.pem
docker secret create -l $NS auth-server-cert.pem $CERTS/auth-server-cert.pem
docker secret create -l $NS hono-service-auth-config.yml $CONFIG/hono-service-auth-config.yml
docker service create -l $NS --detach --name hono-service-auth --network $NS \
  --secret auth-server-key.pem \
  --secret auth-server-cert.pem \
  --secret trusted-certs.pem \
  --secret hono-service-auth-config.yml \
  --env SPRING_CONFIG_LOCATION=file:///run/secrets/hono-service-auth-config.yml \
  --env SPRING_PROFILES_ACTIVE=authentication-impl,dev \
  --env LOGGING_CONFIG=classpath:logback-spring.xml \
  eclipse/hono-service-auth:${project.version}
echo ... done

...
</code></pre>

<p>In order to provide access to resources that are not part of the Docker image itself, a local file system path can be mounted as a <a href="https://docs.docker.com/engine/reference/commandline/run/#mount-tmpfs---tmpfs">Docker <em>volume</em></a> when starting a container. Using this approach, resources from the local host&rsquo;s file system can be accessed from within the running container via the mapped file system path. However, the problem with this approach is that it does not work well with clusters of Docker Engines (i.e. a Swarm) because of the dependency on the Docker Engine&rsquo;s local host file system.</p>

<p>Since Docker 17.03.1, the new and preferred way to provide containers access to private resources is by means of defining <a href="https://docs.docker.com/engine/swarm/secrets/"><em>Secrets</em></a> at the Swarm level. A container running in the Swarm can be configured to get access to any subset of the Swarm&rsquo;s secrets, regardless of the particular node it is running on. The Swarm manager provides access to the secrets to containers by means of a <code>tmpfs</code> file system mounted at <code>/run/secrets</code> where the secrets are represented as normal files that the container can read from. Please refer to the <a href="https://docs.docker.com/engine/swarm/secrets/">Secrets documentation</a> for details.</p>

<p>The <code>swarm_deploy.sh</code> script already creates and uses Docker secrets for providing configuration properties and keys and certificates to the arbitrary services. We will use the same mechanism to configure a custom permissions file to be used by the Auth Server component.</p>

<h3 id="create-custom-permissions">Create custom Permissions</h3>

<ol>
<li><p>Create a copy of the default <code>services/auth/src/main/resources/permissions.json</code> file:</p>

<pre><code class="language-sh">   ~/tmp$ cp ~/hono/services/auth/src/main/resources/permissions.json ./my-permissions.json
</code></pre></li>

<li><p>Open the <code>my-permissions.json</code> file and authorize a <code>new-user</code> with password <code>mypassword</code> to act as a protocol adapter, i.e. write telemetry data and events for all tenants, and manage device registration information. In order to do so, simply add a <code>new-user@HONO</code> element at the end of the file as shown below:</p>

<pre><code class="language-json">    {
      ...
      &quot;users&quot;: {
        &quot;rest-adapter@HONO&quot;: {
          &quot;mechanism&quot;: &quot;PLAIN&quot;,
          &quot;password&quot;: &quot;rest-secret&quot;,
          &quot;authorities&quot;: [ &quot;hono-component&quot;, &quot;protocol-adapter&quot;, &quot;device-manager&quot; ]
        },
        &quot;mqtt-adapter@HONO&quot;: {
          &quot;mechanism&quot;: &quot;PLAIN&quot;,
          &quot;password&quot;: &quot;mqtt-secret&quot;,
          &quot;authorities&quot;: [ &quot;hono-component&quot;, &quot;protocol-adapter&quot; ]
        },
        &quot;hono-client@HONO&quot;: {
          &quot;mechanism&quot;: &quot;PLAIN&quot;,
          &quot;password&quot;: &quot;secret&quot;,
          &quot;authorities&quot;: [ &quot;protocol-adapter&quot;, &quot;device-manager&quot; ]
        },
        &quot;new-user@HONO&quot;: {
          &quot;mechanism&quot;: &quot;PLAIN&quot;,
          &quot;password&quot;: &quot;mypassword&quot;,
          &quot;authorities&quot;: [ &quot;protocol-adapter&quot;, &quot;device-manager&quot; ]
        }
      }
    }
</code></pre></li>

<li><p>Save the file.</p></li>
</ol>

<h3 id="modifying-the-deploy-script">Modifying the Deploy Script</h3>

<ol>
<li><p>Open the default <code>~/hono/example/src/main/deploy/docker/swarm_deploy.sh</code> file in a text editor and add a <code>docker secret create</code> command for <code>my-permissions.json</code> to the already existing ones for the Auth Service. Make sure to specify the correct path to the <code>my-permissions.json</code> file you have created.</p>

<pre><code class="language-sh">   ...
   echo Deploying Authentication Server ...
   docker secret create -l $NS auth-server-key.pem $CERTS/auth-server-key.pem
   docker secret create -l $NS auth-server-cert.pem $CERTS/auth-server-cert.pem
   docker secret create -l $NS hono-service-auth-config.yml $CONFIG/hono-service-auth-config.yml
   docker secret create -l $NS my-permissions.json ~/tmp/my-permissions.json
   ...
</code></pre></li>

<li><p>Configure the <em>hono-service-auth</em> service to get access to the secret and configure it to use the custom permissions file:</p>

<pre><code class="language-sh">   ...
   docker service create -l $NS --detach --name hono-service-auth --network $NS \
     --secret auth-server-key.pem \
     --secret auth-server-cert.pem \
     --secret trusted-certs.pem \
     --secret hono-service-auth-config.yml \
     --secret my-permissions.json \
     --env SPRING_CONFIG_LOCATION=file:///run/secrets/hono-service-auth-config.yml \
     --env SPRING_PROFILES_ACTIVE=authentication-impl,dev \
     --env LOGGING_CONFIG=classpath:logback-spring.xml \
     eclipse/hono-service-auth:${project.version}
   echo ... done
   ...
</code></pre>

<p>The newly added <code>docker secret create</code> command defines the secret that the service should get access to during runtime.</p></li>

<li><p>Save the file.</p></li>

<li><p>Open the <code>~/hono/example/src/main/config/hono-service-auth-config.yml</code> file in a text editor and add the <em>hono.auth.svc.permissionsPath</em> property pointing to the custom property file:</p>

<pre><code class="language-json">   hono:
     app:
       maxInstances: 1
     auth:
       amqp:
         bindAddress: 0.0.0.0
         keyPath: /run/secrets/auth-server-key.pem
         certPath: /run/secrets/auth-server-cert.pem
         trustStorePath: /run/secrets/trusted-certs.pem
         insecurePortEnabled: true
         insecurePortBindAddress: 0.0.0.0
       svc:
         permissionsPath: file:///run/secrets/my-permissions.json
</code></pre>

<p>Note that the newly added <em>hono.auth.svc.permissionsPath</em> property points to <code>file:///run/secrets/my-permissions.json</code> which is the file system resource that the secret will be mounted to by the Swarm manager.</p></li>

<li><p>Save the file.</p></li>

<li><p>Build the deploy script.</p>

<pre><code class="language-sh">   ~/hono/example$ mvn install
</code></pre></li>
</ol>

<h3 id="deploying-the-stack">Deploying the Stack</h3>

<p>Now that the deploy script has been updated, it is time to deploy and start up the stack using the custom permissions.
Make sure to replace <code>my-swarm.my-domain.com</code> with the host name or IP address of one of the Docker Swarm managers you want to deploy the stack to.</p>

<pre><code class="language-sh">~/hono/example$ export DOCKER_HOST=tcp://my-swarm.my-domain.com:2375
~/hono/example$ target/deploy/docker/swarm_deploy.sh
</code></pre>

<p>The log output of the <em>Auth Server</em> should contain a line similar to this:</p>

<pre><code class="language-sh">14:02:15.790 [vert.x-eventloop-thread-1] INFO  o.e.h.a.i.FileBasedAuthenticationService - loading permissions from resource file:/run/secrets/my-permissions.json
</code></pre>

<p>Once the stack is up and running, start up a consumer as described by the <a href="/hono/getting-started/#starting-a-consumer">Getting started Guide</a>. You should then be able to connect to the Hono server using the example sender from the <code>example</code> module, specifying <code>new-user@HONO</code> as the user name.</p>

<pre><code class="language-sh">~/hono/example$ mvn spring-boot:run -Drun.profiles=sender,ssl -Drun.arguments=--hono.client.username=new-user@HONO,--hono.client.password=mypassword,--hono.client.hostname=my-swarm.my-domain.com
</code></pre>

<p>Again, make sure to replace <code>my.swarm.my-domain.com</code> with the host name or IP address of one of the Swarm nodes.</p>

<p>Once the sender is up and running you can enter some message(s) to be uploaded as telemetry data which should then be logged to the console where the consumer is running.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Docker Swarm&rsquo;s <em>Secrets</em> mechanism can be used to provide containers running in a Swarm with access to confidential resources, regardless of the node the container is running on.</p>

<p>The example given of using a custom permissions file can be easily adapted to other use cases as well, e.g. for configuring custom keys and certificates or for using a custom configuration file for the Dispatch Router.</p>

<h2 id="further-reading">Further Reading</h2>

<p>Alex Ellis has blogged about <a href="http://blog.alexellis.io/swarm-secrets-in-action/">Docker Secrets in Action</a> which provides an excellent introduction to Docker Secrets and how they can be used.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>If during deployment to docker swarm there are error messages about a wrong API version 1.23, this might come from a previous deployment to <code>minikube</code> (Kubernetes).
Please check in this case the following command:</p>

<pre><code>$ docker secret ls
</code></pre>

<p>If the output is</p>

<pre><code>docker secret ls requires API version 1.25, but the Docker daemon API version is 1.23
</code></pre>

<p>then try to unset the environment variable <code>DOCKER_API_VERSION</code> by</p>

<pre><code>$ unset DOCKER_API_VERSION
</code></pre>

<p>Afterwards <code>docker secret ls</code> should work without error and you can retry the deployment.</p>

      <aside class="copyright" role="note">
  <div class="logo">
    <a href="https://www.eclipse.org" target="_blank">
      <img src="https://www.eclipse.org/hono/images/eclipse_foundation_logo.png" />
    </a>
  </div>
  <p class="notice">
    
    &copy; 2018 The Eclipse Hono Project &ndash;
    
    Documentation built with
    <a href="https://www.gohugo.io" target="_blank">Hugo</a>
    using the
    <a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
  </p>
  <p class="quickLinks">
    <a href="http://www.eclipse.org/legal/privacy.php" target="_blank">
      &gt; Privacy Policy
    </a>
    <a href="http://www.eclipse.org/legal/termsofuse.php" target="_blank">
      &gt; Terms of Use
    </a>
    <a href="http://www.eclipse.org/legal/copyright.php" target="_blank">
      &gt; Copyright Agent
    </a>
    <a href="http://www.eclipse.org/legal" target="_blank">
      &gt; Legal
    </a>
    <a href="https://eclipse.org/security" target="_blank">
      &gt; Report a Vulnerability
    </a>
  </p>
</aside>


			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://www.eclipse.org/hono/deployment/openshift_s2i/" title="OpenShift with source-to-image (S2I)">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              OpenShift with source-to-image (S2I)
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://www.eclipse.org/hono/deployment/resource-limitation/" title="Limiting Resource Usage">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Limiting Resource Usage
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>






			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/www.eclipse.org\/hono\/';
      var repo_id  = 'eclipse\/hono';
    
    </script>

    <script src="https://www.eclipse.org/hono/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            if(!headers[i].id)
                a.setAttribute("href", headers[i].parentNode.href);
            else
                a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    
      
      <script>
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5WLCZXC');
      </script>
    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

